
ReleaseSite:
  superclass: BaseDataClass
  items:
  - name: name
    type: str
    doc: Name of the release site
    
  - name: species
    type: Species* # Species must have beemn defined before
    doc: | 
      The named molecule is the one that will be released. Not used for  the 'list' shape. You must specify an orientation 
      if the molecule is a surface molecule.

  - name: orientation
    type: Orientation
    default: Orientation.None
    doc: |
      Must be set if the species represent surface molecules.

  - name: shape
    type: Shape
    default: Shape.Unset
    
  - name: region
    type: Region*
    default: unset
    doc: Sets shape to Shape.RegionExpr. 

  - name: location
    type: Vec3 # Vec3 and Vec2 are built-in data types
    default: unset # null is equivalent to None in YAML
    
  - name: site_diameter
    type: float
    default: 0
    doc: |
      For a geometrical release site, this releases molecules uniformly within
      a radius r. Not used for releases on regions.
    
  # do we need radius when we have diameter?
  - name: site_radius
    type: float
    default: unset
    doc: |
      For a geometrical release site, this releases molecules uniformly within
      a radius r. Not used for releases on regions.

  - name: number_to_release
    type: int
    default: unset
    doc: Only one of number_to_release or density can be set.

  - name: density
    type: float
    default: unset
    doc: Only one of number_to_release or density can be set.
    
  - name: release_probability
    type: float
    default: unset


InstantiationData:
  items:
  - name: release_sites
    type: List[ReleaseSite*]
    default: empty
    
  - name: geometry_objects
    type: List[GeometryObject*]
    default: empty

  methods:
  - name: add_release_site
    doc: Makes a copy of the release site
    params:
    - name: s
      type: ReleaseSite*
      
  - name: find_release_site
    return_type: ReleaseSite*
    params:
    - name: name
      type: str
      
  - name: add_geometry_object
    doc: Makes a copy of the geometry object, in the future we will probably add some transformations
    params:
    - name: o
      type: GeometryObject*

    - name: name
      type: str
      default: ""
      doc: When name is not set, the name of the object is used
      
  - name: find_geometry_object
    return_type: GeometryObject*
    params:
    - name: name
      type: str          